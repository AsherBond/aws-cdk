"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("aws-cdk-lib");
const integ = require("@aws-cdk/integ-tests-alpha");
const aws_dynamodb_1 = require("aws-cdk-lib/aws-dynamodb");
const customAspect = require("../lib/nodejs-aspect");
const aws_lambda_1 = require("aws-cdk-lib/aws-lambda");
/**
 * This test creates a stack and changes termination protection with the setter.
 */
//Dynamo DB
class NodejsAspectTest extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        // Test for Lambda provider
        new aws_dynamodb_1.Table(this, 'Table', {
            partitionKey: { name: 'hashKey', type: aws_dynamodb_1.AttributeType.STRING },
            removalPolicy: cdk.RemovalPolicy.DESTROY,
            replicationRegions: ['us-east-2'],
        });
    }
}
const app = new cdk.App();
const stack = new NodejsAspectTest(app, 'NodejsStack', { terminationProtection: false });
cdk.Aspects.of(stack).add(customAspect.NodeJsAspect.modifyRuntimeTo(aws_lambda_1.Runtime.NODEJS_20_X));
new integ.IntegTest(app, 'stack', { testCases: [stack] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcuYXNwZWN0LWR5bmFtby1kYi1zdGFjay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmFzcGVjdC1keW5hbW8tZGItc3RhY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtQ0FBbUM7QUFDbkMsb0RBQW9EO0FBRXBELDJEQUFnRTtBQUNoRSxxREFBcUQ7QUFDckQsdURBQWlEO0FBRWpEOztHQUVHO0FBRUgsV0FBVztBQUNYLE1BQU0sZ0JBQWlCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFFdEMsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFzQjtRQUM5RCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN4QiwyQkFBMkI7UUFDM0IsSUFBSSxvQkFBSyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUU7WUFDdkIsWUFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsNEJBQWEsQ0FBQyxNQUFNLEVBQUU7WUFDN0QsYUFBYSxFQUFFLEdBQUcsQ0FBQyxhQUFhLENBQUMsT0FBTztZQUN4QyxrQkFBa0IsRUFBRSxDQUFDLFdBQVcsQ0FBQztTQUNsQyxDQUFDLENBQUM7S0FFSjtDQUNGO0FBRUQsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsYUFBYSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUV6RixHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsb0JBQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQzFGLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGludGVnIGZyb20gJ0Bhd3MtY2RrL2ludGVnLXRlc3RzLWFscGhhJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMvbGliL2NvbnN0cnVjdCc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVUeXBlLCBUYWJsZSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1keW5hbW9kYic7XG5pbXBvcnQgKiBhcyBjdXN0b21Bc3BlY3QgZnJvbSAnLi4vbGliL25vZGVqcy1hc3BlY3QnO1xuaW1wb3J0IHsgUnVudGltZSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1sYW1iZGEnO1xuXG4vKipcbiAqIFRoaXMgdGVzdCBjcmVhdGVzIGEgc3RhY2sgYW5kIGNoYW5nZXMgdGVybWluYXRpb24gcHJvdGVjdGlvbiB3aXRoIHRoZSBzZXR0ZXIuXG4gKi9cblxuLy9EeW5hbW8gREJcbmNsYXNzIE5vZGVqc0FzcGVjdFRlc3QgZXh0ZW5kcyBjZGsuU3RhY2sge1xuXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzPzogY2RrLlN0YWNrUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcbiAgICAvLyBUZXN0IGZvciBMYW1iZGEgcHJvdmlkZXJcbiAgICBuZXcgVGFibGUodGhpcywgJ1RhYmxlJywge1xuICAgICAgcGFydGl0aW9uS2V5OiB7IG5hbWU6ICdoYXNoS2V5JywgdHlwZTogQXR0cmlidXRlVHlwZS5TVFJJTkcgfSxcbiAgICAgIHJlbW92YWxQb2xpY3k6IGNkay5SZW1vdmFsUG9saWN5LkRFU1RST1ksXG4gICAgICByZXBsaWNhdGlvblJlZ2lvbnM6IFsndXMtZWFzdC0yJ10sXG4gICAgfSk7XG5cbiAgfVxufVxuXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xuY29uc3Qgc3RhY2sgPSBuZXcgTm9kZWpzQXNwZWN0VGVzdChhcHAsICdOb2RlanNTdGFjaycsIHsgdGVybWluYXRpb25Qcm90ZWN0aW9uOiBmYWxzZSB9KTtcblxuY2RrLkFzcGVjdHMub2Yoc3RhY2spLmFkZChjdXN0b21Bc3BlY3QuTm9kZUpzQXNwZWN0Lm1vZGlmeVJ1bnRpbWVUbyhSdW50aW1lLk5PREVKU18yMF9YKSk7XG5uZXcgaW50ZWcuSW50ZWdUZXN0KGFwcCwgJ3N0YWNrJywgeyB0ZXN0Q2FzZXM6IFtzdGFja10gfSk7Il19